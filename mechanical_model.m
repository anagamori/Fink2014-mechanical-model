close all
clear all
clc

k = 0.5;
tau_m = 9.6/1000;

% x = [theta; ...
%     theta_dot;...
%     T_e;...
%     T_e_dot;...
%     T_f;...
%     T_f_dot];

x = [0; ...
    0;...
    0;...
    0;...
    0;...
    0];
A = [0 1 0 0 0 0; ...
    0 -k/tau_m 1/tau_m^2 0 -1/tau_m^2 0;...
    0 0 0 1 0 0;...
    0 0 -1/tau_m^2 -2/tau_m 0 0;...
    0 0 0 0 0 1;...
    0 0 0 0 -1/tau_m^2 -2/tau_m];

B = [0 0;...
    0 0;...
    0 0;...
    1/tau_m^2 0;...
    0 0;...
    0 1/tau_m^2];

u = [0;0];

x_dot = A*x+B*u;

Fs = 1000;
time = 0:1/Fs:1;

I_e = 25*exp(-(time-0.025).^2/(2*0.01^2));
I_f = zeros(1,length(time));

for t = 1:length(time)
   u(1) = I_e(t);
   u(2) = I_f(t);
   x_dot = A*x+B*u;
   x = x_dot*1/Fs+x;
   
   theta_vec(t) = x(1);
end

figure(1)
plot(time,theta_vec);